---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Section from "@/components/layout/Section.astro";
import Card from "@/components/ui/Card.astro";
import ScarcityBanner from "@/components/marketing/ScarcityBanner.astro";
import WaitlistCounter from "@/components/marketing/WaitlistCounter";
import ScreenshotPlaceholder from "@/components/ui/ScreenshotPlaceholder.astro";
import { t } from "@/i18n/utils";

const locale = "fr";
---

<BaseLayout
  title={t("site.title", locale)}
  description={t("site.description", locale)}
  locale={locale}
  path="/"
>
  <main id="main-content">
    {/* Hero */}
    <Section>
      <div class="mx-auto max-w-3xl text-center">
        <h1 class="text-display font-bold tracking-tight text-foreground">
          {t("hero.headline", locale)}
        </h1>
        <p class="mt-6 text-body-lg text-muted-foreground">
          {t("hero.subheadline", locale)}
        </p>

        <div class="mt-8">
          <ScarcityBanner text={t("scarcity.banner", locale)} />
        </div>

        <div class="mt-8 flex flex-col items-center gap-4 sm:flex-row sm:justify-center">
          <a
            href={`/${locale}/waitlist/`}
            class="inline-flex h-12 min-h-[44px] items-center justify-center gap-2 rounded-lg bg-primary px-8 text-body font-medium text-primary-foreground transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"
          >
            {t("hero.cta", locale)}
          </a>
          <a
            href={`/${locale}/pricing/`}
            class="inline-flex h-12 min-h-[44px] items-center justify-center gap-2 rounded-lg border border-input bg-background px-8 text-body font-medium text-foreground transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"
          >
            {t("hero.cta_secondary", locale)}
          </a>
        </div>

        <div class="mt-6 flex justify-center">
          <WaitlistCounter
            client:visible
            text={t("waitlist.counter", locale)}
          />
        </div>

        {/* Product screenshot */}
        <div class="mt-12 max-w-4xl mx-auto">
          <ScreenshotPlaceholder label="Screenshot: Product interface" suggestion="Show a research answer card with confidence score badge (e.g. 87%), jurisdiction tag, cited article excerpts, and 'View sources' expandable. Use a real Belgian tax law question." />
        </div>
      </div>
    </Section>

    {/* Problème */}
    <Section muted>
      <div class="mx-auto max-w-3xl">
        <h2 class="text-h2 font-bold text-foreground">Le problème des outils d'IA fiscale aujourd'hui</h2>
        <p class="mt-4 text-body text-muted-foreground">
          L'IA généraliste donne des réponses assurées aux questions fiscales. C'est précisément ce qui la rend dangereuse.
        </p>
        <div class="mt-8 grid gap-4 sm:grid-cols-2">
          <div class="flex gap-3">
            <span class="mt-1 flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-destructive/10 text-destructive text-body-sm font-bold">&times;</span>
            <p class="text-body-sm text-muted-foreground"><strong class="text-foreground">Sources fabriquées</strong> — cite des arrêts et articles qui n'existent pas, sans possibilité de vérification</p>
          </div>
          <div class="flex gap-3">
            <span class="mt-1 flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-destructive/10 text-destructive text-body-sm font-bold">&times;</span>
            <p class="text-body-sm text-muted-foreground"><strong class="text-foreground">Connaissances obsolètes</strong> — données d'entraînement en retard de mois ou d'années, alors que le droit fiscal change constamment</p>
          </div>
          <div class="flex gap-3">
            <span class="mt-1 flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-destructive/10 text-destructive text-body-sm font-bold">&times;</span>
            <p class="text-body-sm text-muted-foreground"><strong class="text-foreground">Aucune conscience hiérarchique</strong> — traite un billet de blog et un arrêt de la Cour de cassation de la même manière</p>
          </div>
          <div class="flex gap-3">
            <span class="mt-1 flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-destructive/10 text-destructive text-body-sm font-bold">&times;</span>
            <p class="text-body-sm text-muted-foreground"><strong class="text-foreground">Aveugle aux juridictions</strong> — mélange les règles flamandes, wallonnes et bruxelloises, ainsi que celles des Pays-Bas et de la France, sans distinction</p>
          </div>
          <div class="flex gap-3">
            <span class="mt-1 flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-destructive/10 text-destructive text-body-sm font-bold">&times;</span>
            <p class="text-body-sm text-muted-foreground"><strong class="text-foreground">Cécité temporelle</strong> — Demandez "Quelle était la limite de déduction en 2019 ?" et obtenez la réponse d'aujourd'hui. Aucune capacité à raisonner sur la loi telle qu'elle existait à un moment précis.</p>
          </div>
          <div class="flex gap-3">
            <span class="mt-1 flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-destructive/10 text-destructive text-body-sm font-bold">&times;</span>
            <p class="text-body-sm text-muted-foreground"><strong class="text-foreground">Fausse confiance</strong> — Présente chaque réponse avec la même certitude, qu'elle soit étayée par 10 sources ou par pure spéculation. Impossible de savoir quand creuser plus loin.</p>
          </div>
        </div>
      </div>
    </Section>

    {/* Piliers de confiance */}
    <Section>
      <div class="mx-auto max-w-4xl text-center mb-12">
        <p class="text-body-sm font-medium text-primary uppercase tracking-wider mb-2">Conçu pour</p>
        <div class="flex flex-wrap justify-center gap-2">
          <span class="inline-flex items-center rounded-full border border-border bg-muted/50 px-3 py-1 text-body-sm text-foreground">Avocats fiscalistes</span>
          <span class="inline-flex items-center rounded-full border border-border bg-muted/50 px-3 py-1 text-body-sm text-foreground">Conseillers fiscaux</span>
          <span class="inline-flex items-center rounded-full border border-border bg-muted/50 px-3 py-1 text-body-sm text-foreground">Experts-comptables</span>
          <span class="inline-flex items-center rounded-full border border-border bg-muted/50 px-3 py-1 text-body-sm text-foreground">Juristes d'entreprise</span>
          <span class="inline-flex items-center rounded-full border border-border bg-muted/50 px-3 py-1 text-body-sm text-foreground">Single family offices</span>
          <span class="inline-flex items-center rounded-full border border-border bg-muted/50 px-3 py-1 text-body-sm text-foreground">Multi family offices</span>
          <span class="inline-flex items-center rounded-full border border-border bg-muted/50 px-3 py-1 text-body-sm text-foreground">Banques privées</span>
          <span class="inline-flex items-center rounded-full border border-border bg-muted/50 px-3 py-1 text-body-sm text-foreground">Planificateurs successoraux</span>
          <span class="inline-flex items-center rounded-full border border-border bg-muted/50 px-3 py-1 text-body-sm text-foreground">Notaires</span>
          <span class="inline-flex items-center rounded-full border border-border bg-muted/50 px-3 py-1 text-body-sm text-foreground">Départements fiscaux</span>
        </div>
      </div>
      <div class="mx-auto max-w-3xl text-center">
        <h2 class="text-h2 font-bold text-foreground">{t("trust.section_title", locale)}</h2>
        <p class="mt-2 text-body text-muted-foreground">{t("site.tagline", locale)}</p>
      </div>
      <div class="mt-12 grid gap-6 sm:grid-cols-3">
        <Card>
          <h3 class="text-body-lg font-semibold text-foreground">{t("trust.transparency", locale)}</h3>
          <p class="mt-2 text-body-sm text-muted-foreground">{t("trust.transparency_desc", locale)}</p>
        </Card>
        <Card>
          <h3 class="text-body-lg font-semibold text-foreground">{t("trust.precision", locale)}</h3>
          <p class="mt-2 text-body-sm text-muted-foreground">{t("trust.precision_desc", locale)}</p>
        </Card>
        <Card>
          <h3 class="text-body-lg font-semibold text-foreground">{t("trust.belgium", locale)}</h3>
          <p class="mt-2 text-body-sm text-muted-foreground">{t("trust.belgium_desc", locale)}</p>
        </Card>
      </div>
    </Section>

    {/* Comment ça marche teaser */}
    <Section muted>
      <div class="mx-auto max-w-3xl">
        <h2 class="text-h2 font-bold text-foreground">Conçu spécifiquement pour le droit fiscal belge</h2>
        <p class="mt-4 text-body text-muted-foreground">
          Pas une IA généraliste avec un plugin fiscal. Une plateforme de recherche spécialisée, conçue de A à Z.
        </p>
        <div class="mt-8 space-y-6">
          <div class="flex gap-4">
            <span class="flex h-8 w-8 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary text-body-sm font-bold">13</span>
            <div>
              <p class="text-body font-semibold text-foreground">Hiérarchie des autorités</p>
              <p class="text-body-sm text-muted-foreground">Constitution &gt; Lois &gt; Arrêtés royaux &gt; Circulaires &gt; Doctrine — le système sait quelle source prime en cas de conflit.</p>
            </div>
          </div>
          <div class="flex gap-4">
            <span class="flex h-8 w-8 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary">
              <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
            </span>
            <div>
              <p class="text-body font-semibold text-foreground">Versionnage temporel</p>
              <p class="text-body-sm text-muted-foreground">"Quel était le taux d'impôt des sociétés en 2019 ?" — répondu avec la loi telle qu'elle était alors, pas telle qu'elle est aujourd'hui.</p>
            </div>
          </div>
          <div class="flex gap-4">
            <span class="flex h-8 w-8 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary">
              <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129" /></svg>
            </span>
            <div>
              <p class="text-body font-semibold text-foreground">Trilingue NL/FR/EN</p>
              <p class="text-body-sm text-muted-foreground">Posez votre question en néerlandais, français ou anglais — trouvez des dispositions dans n'importe quelle langue. Avec une terminologie juridiquement correcte dans les trois.</p>
            </div>
          </div>
          <div class="flex gap-4">
            <span class="flex h-8 w-8 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary">
              <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" /></svg>
            </span>
            <div>
              <p class="text-body font-semibold text-foreground">Transparence des sources</p>
              <p class="text-body-sm text-muted-foreground">Chaque réponse montre ses sources. Chaque affirmation peut être vérifiée. Si nous ne sommes pas sûrs, nous le disons.</p>
            </div>
          </div>
        </div>
        <div class="mt-8">
          <a href={`/${locale}/how-it-works/`} class="text-body-sm font-medium text-primary hover:underline">
            Découvrez comment ça marche &rarr;
          </a>
        </div>
      </div>
    </Section>

    {/* Promesse */}
    <Section>
      <div class="mx-auto max-w-2xl text-center">
        <blockquote class="border-l-4 border-primary pl-6 py-2 text-left">
          <p class="text-h3 font-semibold text-foreground">
            "En fiscalité, 'probablement juste' ne suffit pas."
          </p>
        </blockquote>
        <p class="mt-6 text-body text-muted-foreground">
          Nous préférons vous donner un honnête « nous ne sommes pas sûrs » plutôt qu'une réponse convaincante bâtie sur des preuves fragiles. C'est notre promesse — non pas que nous ayons toujours raison, mais que vous saurez toujours où vous en êtes.
        </p>
        <div class="mt-6">
          <a href={`/${locale}/about/`} class="text-body-sm font-medium text-primary hover:underline">
            Lire notre histoire &rarr;
          </a>
        </div>
      </div>
    </Section>

    {/* CTA */}
    <Section muted>
      <div class="mx-auto max-w-2xl text-center">
        <h2 class="text-h2 font-bold text-foreground">{t("waitlist.title", locale)}</h2>
        <p class="mt-4 text-body text-muted-foreground">{t("waitlist.subtitle", locale)}</p>
        <div class="mt-8">
          <a
            href={`/${locale}/waitlist/`}
            class="inline-flex h-12 min-h-[44px] items-center justify-center gap-2 rounded-lg bg-primary px-8 text-body font-medium text-primary-foreground transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"
          >
            {t("hero.cta", locale)}
          </a>
        </div>
      </div>
    </Section>
  </main>
</BaseLayout>
